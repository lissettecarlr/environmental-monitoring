---
title: 环境监测装置通信协议
---

## 模块-->服务器
### 发送监测数据

| 帧头   | 模块号 | 数据类型 | 数据  | 电量  | 保留  | 校验和 |
| ------ | ------ | -------- | ----- | ----- | ----- | ------ |
| 0XFFAA | 2byte  | 1byte    | 2byte | 1byte | 1byte | 1byte  |

数据类型:

| 特征值 | 说明                                                             |
| ------ | ---------------------------------------------------------------- |
| 0x01   | 温度 (数据*10传输) 例如接收到两个字节大小等于121，则温度为12.1度 |
| 0x02   | 湿度 （同温度）                                                    |
| 0x03   | 二氧化碳（数据*1传输）                                           |
| 0x04   | 甲醛（数据*100传输）                                             |
| 0x05   | 粉尘（数据*10传输）同温度                                        |

### 发送应答
如果需要应答，则修改将得到的数据修改包头和校验和后发送给服务器
| 帧头   | 模块号 | 命令  | 校验和 |
| ------ | ------ | ----- | ------ |
| 0XFFAA | 2byte  | 1byte |   1byte     |

命令就是接受到的命令值,下位机在连接上服务器后将周期性发送存在确认格式的命令给服务器周期时间初定30S一次.用户可以通过直接使用存在确认使下位机立刻应答


## 服务器对模块（命令）

| 帧头   | 模块号 | 命令  | 校验和 |
| ------ | ------ | ----- | ------ |
| 0XFFDD | 2byte  | 1byte |   1byte     |

| 命令 | 说明                           |
| ---- | ------------------------------ |
| 0X01 | 使模块处于待机状态，不发送数据 |
| 0X02 | 开始周期性发送数据             |
| 0X03 | 复位，重启该模块                |
| 0XFF |  存在确认，下位机将应答  |

*校验和是除去帧头的数据之和*

